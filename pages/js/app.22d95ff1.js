(function(t){function e(e){for(var n,i,o=e[0],l=e[1],c=e[2],p=0,u=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&u.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},s=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var h=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("79d6"),s=r.n(a),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("HelloWorld")],1)},o=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box"},[r("div",{staticClass:"game-restart",on:{click:t.restartGame}},[t._v(" 再来一局 ")]),r("canvas",{ref:"canvas",attrs:{width:"300",height:"300"},on:{click:t.clickTable}}),r("div",{staticClass:"game-refs"},[t.isEnd?r("p",{class:["winner",t.winner.color]},[t._v("winner: "+t._s(t.winner.name))]):r("p",[t._v("next player: "+t._s(t.nextPlayer.name))])]),t.allSteps.length>0?r("div",{staticClass:"game-stpes"},[r("p",[t._v("历史记录（点击可返回到对应步骤）：")]),r("ul",t._l(t.allSteps,(function(e,n){return r("li",{key:"step"+n,on:{click:function(r){return t.clickHistoryStep(e,n)}}},[t._v(" step"+t._s(n+1)+": "+t._s(e.name)+" ")])})),0)]):t._e()])},c=[],h=(r("99af"),r("cb29"),r("4160"),r("a434"),r("b0c0"),r("159b"),r("2909")),p={data:function(){return{context:"",isEnd:!1,winner:{},player1:{name:"红队",color:"red",steps:[]},player2:{name:"蓝队",color:"blue",steps:[]},thisPlayer:{},nextPlayer:{},boardArray:[],cellNum:0,allSteps:[],pairCount:[]}},created:function(){this.nextPlayer=this.copyObj(this.player1)},mounted:function(){this.init()},methods:{init:function(){var t=this.$refs.canvas;this.context=t.getContext("2d"),this.drawTableBg(),this.setBoardArray(),this.linePairArray()},restartGame:function(){this.resetCanvas(),this.player1.steps=[],this.player2.steps=[],this.allSteps=[],this.isEnd=!1,this.winner={}},resetCanvas:function(){this.context.clearRect(0,0,300,300),this.drawTableBg(),this.setBoardArray()},setBoardArray:function(){this.boardArray=[];for(var t=[],e=0;e<3;e++){this.boardArray[e]=[];for(var r=0;r<3;r++){var n=[e,r,"notClick"];this.boardArray[e][r]=[].concat(n),t.push([e,r])}}this.cellNum=t.length,console.log(t),console.log(this.boardArray)},linePairArray:function(){for(var t=[],e=0;e<3;e++){for(var r=[],n=0;n<3;n++)r.push([e,n]);t.push(r)}for(var a=0;a<3;a++){for(var s=[],i=0;i<3;i++)s.push([i,a]);t.push(s)}var o=[1,1],l=o[0],c=o[1],p=l-1,u=c-1,f=l+1,y=c+1,d=l+1,v=c-1,b=l-1,m=c+1,P=[[[p,u],o,[f,y]]],g=[[[d,v],o,[b,m]]];t=[].concat(Object(h["a"])(t),P,g),this.pairCount=t},drawTableBg:function(){var t=this.context;t.beginPath(),t.strokeStyle="#000";for(var e=0;e<4;e++)t.moveTo(100*e,0),t.lineTo(100*e,300),t.stroke(),t.moveTo(0,100*e),t.lineTo(300,100*e),t.stroke();t.closePath()},onStep:function(t,e,r){var n=this.context;n.beginPath(),n.arc(50+100*t,50+100*e,20,0,2*Math.PI),n.closePath(),n.fillStyle=r.color,n.fill()},clickTable:function(t){var e=t.offsetX,r=t.offsetY,n=Math.floor(e/100),a=Math.floor(r/100);this.isEnd?this.openAlert("本次游戏已结束，".concat(this.winner.name,"胜，请再来一局或回到历史记录")):("notClick"===this.boardArray[n][a][2]&&(this.boardArray[n][a][2]="clicked",this.boardArray[n][a][3]=this.nextPlayer.name,this.thisPlayer=this.copyObj(this.nextPlayer),this.thisPlayer.pos=[n,a],this.onStep(n,a,this.nextPlayer),this.allSteps.push({name:this.nextPlayer.name,color:this.nextPlayer.color,pos:[n,a]}),this.nextPlayer.name===this.player1.name?(this.player1.steps.push({pos:[n,a]}),this.nextPlayer={},this.nextPlayer=this.copyObj(this.player2)):(this.player2.steps.push({pos:[n,a]}),this.nextPlayer={},this.nextPlayer=this.copyObj(this.player1))),this.pairOfLine())},pairOfLine:function(){var t=this,e=this.thisPlayer,r=[];r=e.name===this.player1.name?Object(h["a"])(this.player1.steps):Object(h["a"])(this.player2.steps);var n=r.length;if(!(n<3)){for(var a=this.pairCount,s=[],i=0,o=a.length-1;o>-1;o--){var l=a[o];if(i>2)break;i=0;for(var c=0;c<l.length;c++){var p=l[c];if(i>2)break;for(var u=0;u<r.length;u++){var f=r[u].pos;if(p[0]===f[0]&&p[1]===f[1]){i++,i>2&&(s=l);break}}}}console.log("linkOne",s);var y=this;if(s.length>0)this.isEnd=!0,this.winner.name=this.thisPlayer.name,this.winner.color=this.thisPlayer.color,setTimeout((function(){y.openAlert("本次游戏已结束，".concat(t.winner.name,"胜，请再来一局或回到历史记录"))}),800);else{var d=this.allSteps.length;d===this.cellNum&&d>0&&setTimeout((function(){y.openAlert("游戏已结束，暂无胜负。点击再来一局")}),800)}}},clickHistoryStep:function(t,e){var r=this;if(e!==this.allSteps.length-1){this.isEnd=!1,this.winnerName="",this.allSteps.splice(e+1),this.resetCanvas(),this.player1.steps=[],this.player2.steps=[];var n=this.allSteps;n.forEach((function(t,e){var n=t.pos[0],a=t.pos[1];r.boardArray[n][a][2]="clicked",r.boardArray[n][a][3]=t.name,r.onStep(n,a,t),t.name===r.player1.name?r.player1.steps.push({pos:[n,a]}):r.player2.steps.push({pos:[n,a]})})),t.name===this.player1.name?(this.nextPlayer={},this.nextPlayer=this.copyObj(this.player2)):(this.nextPlayer={},this.nextPlayer=this.copyObj(this.player1))}},openAlert:function(t){return this.$layer.alert(t,{title:"提示"})},copyObj:function(t){var e=JSON.parse(JSON.stringify(t));return{name:e.name,color:e.color}}}},u=p,f=(r("6e97"),r("2877")),y=Object(f["a"])(u,l,c,!1,null,"48c5770e",null),d=y.exports,v={name:"App",components:{HelloWorld:d}},b=v,m=(r("5c0b"),Object(f["a"])(b,i,o,!1,null,null,null)),P=m.exports;r("8a62");n["a"].prototype.$layer=s()(n["a"]),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(P)}}).$mount("#app")},"589b":function(t,e,r){},"5c0b":function(t,e,r){"use strict";var n=r("589b"),a=r.n(n);a.a},"6e97":function(t,e,r){"use strict";var n=r("9ddc"),a=r.n(n);a.a},"9ddc":function(t,e,r){}});
//# sourceMappingURL=app.22d95ff1.js.map